<!DOCTYPE html>
<html lang="en">
  {% load static %}


    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
      <meta name="description" content="POS - Bootstrap Admin Template">
      <meta name="keywords" content="admin, estimates, bootstrap, business, corporate, creative, management, minimal, modern, html5, responsive">
      <meta name="author" content="Dreamguys - Bootstrap Admin Template">
      <meta name="robots" content="noindex, nofollow">

      <link rel="apple-touch-icon" sizes="180x180" href="{% static 'home_assets/media/logo.svg' %}">
      <link rel="icon" type="image/png" sizes="32x32" href="{% static 'home_assets/media/logo.svg' %}">
      <link rel="icon" type="image/png" sizes="16x16" href="{% static 'home_assets/media/logo.svg' %}">
      <link rel="shortcut icon" type="image/x-icon" href="{% static 'home_assets/media/logo.svg' %}">

      <title>Admin</title>

      <!-- CSS Files -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
      <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">
      <link rel="stylesheet" href="{% static 'assets/css/animate.css' %}">
      <link rel="stylesheet" href="{% static 'assets/css/dataTables.bootstrap4.min.css' %}">
      <link rel="stylesheet" href="{% static 'assets/plugins/fontawesome/css/fontawesome.min.css' %}">
      <link rel="stylesheet" href="{% static 'assets/plugins/fontawesome/css/all.min.css' %}">
      <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
      <link rel="stylesheet" href="{% static 'assets/plugins/select2/css/select2.min.css' %}">
      <link rel="stylesheet" href="{% static 'assets/plugins/lightbox/glightbox.min.css' %}">
      <link rel="stylesheet" href="{% static 'assets/plugins/owlcarousel/owl.carousel.min.css' %}">
      <link rel="stylesheet" href="{% static 'assets/css/bootstrap-datetimepicker.min.css' %}">

      <!-- JS Files -->
      <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
      <script src="https://cdn.tiny.cloud/1/2emtw9ub1z5hiqkoov7jmrm7mrz0ahwkt5n0tayd8mv5dkbk/tinymce/7/tinymce.min.js" referrerpolicy="origin"></script>

      <!-- Optional JS for Reloading on Page Show Event -->
      <!--
      <script>
        (function () {
          window.onpageshow = function (event) {
            if (event.persisted) {
              window.location.reload();
            }
          };
        })();
      </script>
      -->
    </head>

    <style>
      /* Add your styles here or link to an external stylesheet */
      
      .top-nav-search {
        position: relative;
        display: flex;
        align-items: center;
      }
    
      #search-result {
        position: absolute;
        top: 100%;
        left: 0;
        background-color: #fff;
        border: 1px solid #ccc;
        border-top: none;
        width: 100%;
        display: none;
        z-index: 10;
      }
    
      .dropdown-item {
        padding: 10px;
        border-bottom: 1px solid #ccc;
      }
    
      /* Add styles for the mode button */
      .mode-button {
        display: inline-block;
        width: 40px; /* Adjust the width as needed */
        height: 20px; /* Adjust the height as needed */
        text-align: center;
        line-height: 20px;
        cursor: pointer;
      }
    
      /* Add styles for the icons (Font Awesome icons are font-based) */
      .mode-button i {
        font-size: 16px; /* Adjust the icon size as needed */
      }
    
      /* Style for the clicked submenu item */
      .clicked-submenu {
        color: #ff0000; /* Replace with the desired color */
      }
    
      /* Style for the selected link */
      .selected-link {
        background-color: #f2f2f2; /* Change this to your preferred highlight color */
        color: #000; /* Change this to your preferred text color */
        transition: background-color 0.3s ease;
      }
    
      .notification-number {
        background-color: #fdd700; /* Set background color */
        color: #ffffff; /* Set text color */
        padding: 0px 0px; /* Adjust padding */
        border-radius: 50%; /* Make it a perfect circle */
        font-size: 10px; /* Adjust font size */
        display: inline-block; /* Ensure inline-block to properly set width and height */
        width: 22px; /* Set the width */
        height: 22px; /* Set the height */
        text-align: center; /* Center text horizontally */
        line-height: 20px; /* Center text vertically */
      }
    </style>
    

    <body>
      <!-- <div id="global-loader">
        <div class="whirly-loader"></div>
      </div> -->

      <div class="main-wrapper">

        <div class="header">

          <div class="header-left active">
            <a href="" class="logo mx-5 logo-normal">
              <img src="{% static 'home_assets/media/logo-red.svg' %}" alt>
            </a>
            <a href="" class="logo mx-5 logo-white">
              <img src="{% static 'home_assets/media/logo-red.svg' %}" alt>
            </a>
            <a href="" class="logo-small mx-5">
              <img src="{% static 'home_assets/media/logo-red.svg' %}" alt>
            </a>
            <a id="toggle_btn" href="javascript:void(0);">
              <i data-feather="chevrons-left" class="feather-16"></i>
            </a>
          </div>
          <a id="mobile_btn" class="mobile_btn" href="#sidebar">
            <span class="bar-icon">
              <span></span>
              <span></span>
              <span></span>
            </span>
          </a>
          <ul class="nav user-menu">
            <li class="nav-item nav-searchinputs">
              <div class="top-nav-search">
                <a href="javascript:void(0);" class="responsive-search">
                  <i class="fa fa-search"></i>
                </a>
              </div>
            </li>
            <li class="nav-item nav-item-box">
              <a href="javascript:void(0);" id="dark-mode-toggle" class="mode-button light-mode">
                <i class="fas fa-sun" style="color: #67748e;"></i>
              </a>
            </li>


            <li class="nav-item nav-item-box">
              <a href="javascript:void(0);" id="btnFullscreen">
                <i data-feather="maximize"></i>
              </a>
            </li>

            <li class="nav-item dropdown has-arrow main-drop">
              <a href="javascript:void(0);" class="dropdown-toggle nav-link userset" data-bs-toggle="dropdown">
                <span class="user-info">
                  <!-- <span class="user-letter">
                    <img src="{% static 'assets/img/profiles/avator1.jpg' %}" alt class="img-fluid">
                  </span> -->
                  <span class="user-detail">
                    {% if super_admin %}
                    <span class="user-name">{{super_admin}}</span>
                    <span class="user-role">Super Admin</span>
                    {% else %}
                    <span class="user-name">{{admin}}</span>
                    <span class="user-role">Admin</span>
                    {% endif %}
                  </span>
                </span>
              </a>
              <div class="dropdown-menu menu-drop-user">
                <div class="profilename">
                  <div class="profileset">
                    <!-- <span class="user-img"><img src="{% static 'assets/img/profiles/avator1.jpg' %}" alt>
                      <span class="status online"></span></span> -->
                    <div class="profilesets">

                      {% if super_admin %}
                      <h6>{{super_admin}}</h6>
                      <h5>Super Admin</h5>
                      {% else %}
                      <h5>{{admin}}</h5>
                      <h5>Admin</h5>
                      {% endif %}

                    </div>
                  </div>
                  <hr class="m-0">
                  <a class="dropdown-item" href="{% url 'admin_dashboard-dashboard' %}"><i class="me-2"
                      data-feather="settings"></i>Reset Password</a>
                  <hr class="m-0">
                  <!-- <a class="dropdown-item" href="profile.html"> <i class="me-2" data-feather="user"></i> My
                    Profile</a>
                  <a class="dropdown-item" href="generalsettings.html"><i class="me-2"
                      data-feather="settings"></i>Settings</a>
                  <hr class="m-0"> -->
                  <a class="dropdown-item logout pb-0" href="{% url 'admin_dashboard-logout' %}"><img src="{% static 'assets/img/icons/log-out.svg' %}"
                      class="me-2" alt="img">Logout</a>
                </div>
              </div>
            </li>
          </ul>


          <div class="dropdown mobile-user-menu">
            <a href="javascript:void(0);" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"
              aria-expanded="false"><i class="fa fa-ellipsis-v"></i></a>
            <div class="dropdown-menu dropdown-menu-right">
              <!-- <a class="dropdown-item" href="profile.html">My Profile</a>
              <a class="dropdown-item" href="generalsettings.html">Settings</a> -->
              <a class="dropdown-item" href="{% url 'admin_dashboard-logout' %}">Logout</a>
            </div>
          </div>

        </div>

        <div class="sidebar" id="sidebar">
          <div class="sidebar-inner slimscroll">
            <div id="sidebar-menu" class="sidebar-menu">
              <ul>
                <li class="submenu-open">
                  <h6 class="submenu-hdr">Main</h6>
                  <ul>
                    <li>
                      <a href="{% url 'admin_dashboard-dashboard' %}" id="dashboard-link">
                        <i data-feather="grid"></i>
                        <span>Dashboard</span>
                      </a>
                    </li>
                  </ul>
                </li>

                <li class="submenu-open">
                  <h6 class="submenu-hdr">Catalog</h6>
                  <ul>
                    <li>
                      <a href="{% url 'admin_dashboard-category_list' %}" id="dashboard-link">
                        <i data-feather="folder"></i>
                        <span>Category</span>
                      </a>
                    </li>
                    <li>
                      <a href="{% url 'admin_dashboard-products_list' %}" id="dashboard-link">
                        <i data-feather="box"></i>
                        <span>Product</span>
                      </a>
                    </li>
                  </ul>
                </li>
                
                
                <li class="submenu-open">
                  <h7 class="submenu-hdr">News</h7>
                  <ul>
                    <li>
                      <a href="{% url 'admin_dashboard-news_article_list' %}" id="dashboard-link">
                        <i data-feather="file-text"></i>
                        <span>News</span>
                      </a>
                    </li>
                  </ul>
                </li>
                
                <li class="submenu-open">
                  <h7 class="submenu-hdr">Blog</h7>
                  <ul>
                    <li>
                      <a href="{% url 'admin_dashboard-blog_post_list' %}" id="dashboard-link">
                        <i data-feather="edit"></i>
                        <span>Blog</span>
                      </a>
                    </li>
                  </ul>
                </li>
                
                <li class="submenu-open">
                  <h7 class="submenu-hdr">Jobs</h7>
                  <ul>
                    <li>
                      <a href="{% url 'admin_dashboard-job_listing_list' %}" id="dashboard-link">
                        <i data-feather="briefcase"></i>
                        <span>Jobs</span>
                      </a>
                    </li>
                  </ul>
                </li>
                
                
                <li class="submenu-open">
                  <h6 class="submenu-hdr"></h6>
                  <ul>
                <li>
                  <a href="{% url 'admin_dashboard-logout' %}">
                    <i data-feather="log-out"></i>
                    <span>Logout</span>
                  </a>
                </li>
                </ul>
                </li>
              </ul>
            </div>
            
          </div>

          

      </div>
        
        
        {% block body %}

        

        {% endblock body %}


      </div>

      <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            setTimeout(() => {
                document.querySelectorAll('.alert').forEach(alert => {
                    alert.classList.remove('show');
                    alert.classList.add('fade');
                    setTimeout(() => {
                        alert.remove();
                    }, 500); // Allow time for fade-out effect
                });
            }, 2000); // 2 seconds delay
        });
    </script>
      <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
      <script>
        function toggleDateInputs() {
          var dateInputs = document.getElementById('dateInputs');
          if (dateInputs.style.display === 'none') {
            dateInputs.style.display = 'block';
          } else {
            dateInputs.style.display = 'none';
          }
        }
      </script>
      <script>
        $(document).ready(function () {
          var searchInput = $('#search-input');
          var searchResults = $('#search-result');

          searchInput.on('input', function () {
            var searchText = $(this).val().trim();

            if (searchText.length > 0) {
              $.ajax({
                url: "",
                method: 'GET',
                data: { 'search_text': searchText },
                success: function (response) {
                  searchResults.html('');

                  if (response.length > 0) {
                    $.each(response, function (index, result) {
                      var item;
                      var maxLength = 32;
                      if (result.type === 'product') {
                        var url = "/a/" + result.id + "/" + result.name_slug;
                        var productName = result.name.length > maxLength ?
                          result.name.substring(0, maxLength) + '...' :
                          result.name;

                        item = $('<a>')
                          .addClass('dropdown-item')
                          .attr('href', url)
                          .append($('<h5>').text(productName).css('display', 'inline-block').attr('title', result.name));
                      }

                      searchResults.append(item);
                    });

                    searchResults.show();
                  } else {
                    searchResults.html('<h5>No results found.</h5>');
                  }
                },
                error: function (xhr) {
                  console.log(xhr.responseText);
                }
              });
            } else {
              searchResults.html('');
              searchResults.hide();
            }
          });

          document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
              searchInput.val('');
              searchResults.html('');
              searchResults.hide();
            }
          });

          $(document).on('click', function (event) {
            if (!$(event.target).closest('.top-nav-search').length) {
              searchResults.hide();
            }
          });
        });
      </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
      const path = window.location.pathname;
      const menuItems = {
        dashboard: { id: "dashboard-link", path: "/adminHome/" },
        healthCare: { id: "healthCare-link", path: "/healthCare/|/healthCareAdd/|/healthCareEdit/", parent: "enquiries" },
        staff: { id: "staff-link", path: "/Staffs/|/StaffAdd/|/StaffEdit/|/Admin_StaffDetailView/", parent: "email" },
        doctor: { id: "doctor-link", path: "/Doctors/|/Admin_DoctorDetailView/", parent: "email" },
        contactUs: { id: "patient-link", path: "/Patients/|/PatientAdd/|/PatientEdit/|/Admin_PatientDetailView/", parent: "enquiries" },
        patient: { id: "products-add", path: "/addProduct/" },
        healthaprv: { id: "healthaprv-link", path: "/AdminApprovalHealthCare",parent: "enquiries"},
        docaprv: { id: "docaprv-link", path: "/AdminApprovalDoctor/" },
        passaprv: { id: "passaprv-link", path: "/password_reset_approval_page/" },
        speciality: { id: "speciality-link", path: "/Admin_Speciality/" },
        products: { id: "products-view", path: "/productList/|/productListMain/" },
        prescp: { id: "prescp-link", path: "/admin_view_prescription/" },
        productsAll: { id: "products-all", path: "/viewallProducts/" },
        addInvoice: { id: "add-invo", path: "/addInvo/" },
        categoryAdd: { id: "category-link", path: "/create-cart-category/" },
        categoryView: { id: "category-view", path: "/categoryList/" },
        reports: { id: "rprts-link", path: "/admin_view_reports/" },
        medicine: { id: "medicine-link", path: "/Medicine/", parent: "users" },
        manager: { id: "manager-add", path: "/addManager/|/managerEdit/" },
        managers: { id: "managers-list", path: "/managerList/", parent: "users" },
        zcarestaff: { id: "zcarestaff", path: "/ZcareStaffs/|/Admin_ZcareStaffDetailView/" },
        transaction: { id: "transaction", path: "/transactions/" },
        booking: { id: "booking-list", path: "/AdminBookingList" },
        whoneedscare: { id: "who-needs-care", path: "/Admin_Who_needs_care" },
        typeofcare: { id: "type-of-care", path: "/Admin_Type_care_of_service/" },
        selfpatients: { id: "selfpatients", path: "/SelfRegistered_Patients/" },
        banner : { id: "banner", path: "AdminApp/Admin_MobileBanner/|/AdminEditMobileBanner/|/AdminAddMobileBanner/" }
      };

      function setActiveMenuItem(item) {
        const element = document.getElementById(item.id);
        if (element) {
          element.style.color = "#00A3E2";
          if (item.parent) {
            const parentElement = document.getElementById(item.parent);
            const submenuElement = document.getElementById(`${item.parent}-submenu`);
            if (parentElement) parentElement.style.color = "#00A3E2";
            if (submenuElement) {
              submenuElement.style.display = 'block';
              submenuElement.style.display = '#00A3E2';
              submenuElement.classList.add('selected-link');
            }
          }
        }
      }

      for (const [key, item] of Object.entries(menuItems)) {
        if (new RegExp(item.path).test(path)) {
          setActiveMenuItem(item);
          return;
        }
      }

      // If no specific path matched, highlight the active menu item
      const activeMenuItem = document.querySelector('.active a');
      if (activeMenuItem) {
        activeMenuItem.style.color = "#00A3E2";
      }
    });
    </script>
    
      <script>
        $(document).ready(function () {
          // Attach a click event to the <a> element
          $("#email").on("click", function (e) {
            // Prevent the default behavior of the link
            e.preventDefault();

            // Make an AJAX request to get the updated count
            $.ajax({
              url: "",  // Replace with the actual URL for getting count
              method: "GET",
              success: function (data) {


                // Update the count in the span
                $(".notification-number").text(data.count);
              },
              error: function (error) {
                console.error("Error fetching count:", error);
              }
            });
          });
        });

      </script>


      <script>
        // JavaScript to toggle between Light and Dark modes
        document.addEventListener('DOMContentLoaded', function () {
          const modeButton = document.getElementById('dark-mode-toggle');
          const globalLoader = document.getElementById('global-loader');
          const icon = modeButton.querySelector('i');

          // Function to set the mode based on saved preference or system preference
          function setMode() {
            const savedMode = localStorage.getItem('mode');

            // Check if the user has a saved mode preference
            if (savedMode === 'dark') {
              modeButton.classList.add('dark-mode');
              modeButton.classList.remove('light-mode');
              icon.classList.remove('fa-sun');
              icon.classList.add('fa-moon');
              globalLoader.style.backgroundColor = '#fff';
            } else {
              modeButton.classList.remove('dark-mode');
              modeButton.classList.add('light-mode');
              icon.classList.remove('fa-moon');
              icon.classList.add('fa-sun');
              globalLoader.style.backgroundColor = '#141432';
            }

            // Add a class to the body to hide the content until styles are applied
            document.body.classList.add('mode-transition');
          }

          // Toggle the mode on button click
          modeButton.addEventListener('click', function () {
            if (modeButton.classList.contains('dark-mode')) {
              localStorage.setItem('mode', 'light');
            } else {
              localStorage.setItem('mode', 'dark');
            }
            setMode(); // Update the mode immediately
          });

          // Initialize the mode when the page loads
          setMode();

          // After styles are applied, remove the class that hides the content
          window.addEventListener('load', function () {
            document.body.classList.remove('mode-transition');
          });

          // Get all the submenu items
          const submenuItems = document.querySelectorAll('.sidebar-menu ul li ul li a');

          // Loop through each submenu item
          submenuItems.forEach(function (submenuItem) {
            submenuItem.addEventListener('click', function () {
              // Remove the 'clicked-submenu' class from all submenu items
              submenuItems.forEach(function (item) {
                item.classList.remove('clicked-submenu');
              });

              // Add the 'clicked-submenu' class to the clicked submenu item
              this.classList.add('clicked-submenu');
            });
          });
        });
      </script>

      <script src="{% static 'assets/js/jquery-3.6.0.min.js' %}"></script>
      <script src="{% static 'assets/js/feather.min.js' %}"></script>
      <script src="{% static 'assets/js/jquery.slimscroll.min.js' %}"></script>
      <script src="{% static 'assets/js/jquery.dataTables.min.js' %}"></script>
      <script src="{% static 'assets/js/dataTables.bootstrap4.min.js' %}"></script>
      <script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>
      <script src="{% static 'assets/plugins/apexchart/apexcharts.min.js' %}"></script>
      <script src="{% static 'assets/plugins/apexchart/chart-data.js' %}"></script>
      <script src="{% static 'assets/js/moment.min.js' %}"></script>
      <script src="{% static 'assets/js/bootstrap-datetimepicker.min.js' %}"></script>
      <script src="{% static 'assets/plugins/select2/js/select2.min.js' %}"></script>
      <script src="{% static 'assets/plugins/sweetalert/sweetalert2.all.min.js' %}"></script>
      <script src="{% static 'assets/plugins/sweetalert/sweetalerts.min.js' %}"></script>
      <script src="{% static 'assets/plugins/lightbox/glightbox.min.js' %}"></script>
      <script src="{% static 'assets/plugins/lightbox/lightbox.js' %}"></script>
      <script src="{% static 'assets/js/script.js' %}"></script>
      <script src="{% static 'assets/plugins/owlcarousel/owl.carousel.min.js' %}"></script>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
            const DEBUG = true;
            
            function log(message) {
                if (DEBUG) console.log(`Sidebar Debug: ${message}`);
            }
        
            function getSidebar() {
                return document.querySelector('.sidebar-inner.slimscroll');
            }
        
            let isManuallyScrolling = false;
            let lastKnownScrollPosition = parseInt(localStorage.getItem('sidebarScrollPosition')) || 0;
        
            function saveScrollPosition(scrollTop) {
                const position = scrollTop || getSidebar()?.scrollTop || 0;
                localStorage.setItem('sidebarScrollPosition', position.toString());
                lastKnownScrollPosition = position;
                log(`Saved scroll position: ${position}`);
            }
        
            function restoreScrollPosition() {
                const sidebar = getSidebar();
                if (!sidebar) return;
        
                if (lastKnownScrollPosition > 0) {
                    log(`Restoring scroll position to ${lastKnownScrollPosition}`);
                    sidebar.scrollTop = lastKnownScrollPosition;
                }
            }
        
            function initScrollHandler() {
                const sidebar = getSidebar();
                if (!sidebar) return;
        
                // Initial restoration
                setTimeout(restoreScrollPosition, 100);
        
                // Handling manual scrolling
                let scrollTimeout;
                sidebar.addEventListener('scroll', function(e) {
                    if (!isManuallyScrolling) {
                        isManuallyScrolling = true;
                        log('Manual scrolling detected');
                    }
        
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => {
                        const currentScroll = sidebar.scrollTop;
                        saveScrollPosition(currentScroll);
                        isManuallyScrolling = false;
                        log(`Scroll ended, saved position: ${currentScroll}`);
                    }, 150);
                });
            }
        
            function preventScrollReset() {
                const sidebar = getSidebar();
                if (!sidebar) return;
        
                // Prevent scroll position reset on hash changes
                window.addEventListener('hashchange', function(e) {
                    e.preventDefault();
                    setTimeout(restoreScrollPosition, 10);
                });
        
                // Backup interval to ensure scroll position
                let backupInterval = setInterval(() => {
                    if (!isManuallyScrolling && sidebar.scrollTop !== lastKnownScrollPosition) {
                        log('Scroll position mismatch detected, restoring...');
                        restoreScrollPosition();
                    }
                }, 1000);
        
                // Clear interval after 10 seconds
                setTimeout(() => {
                    clearInterval(backupInterval);
                    log('Cleared backup interval');
                }, 10000);
            }
        
            function addLinkListeners() {
                const sidebarLinks = document.querySelectorAll('#sidebar-menu a');
                log(`Found ${sidebarLinks.length} sidebar links`);
        
                sidebarLinks.forEach(link => {
                    link.addEventListener('click', function(e) {
                        const sidebar = getSidebar();
                        if (sidebar) {
                            saveScrollPosition(sidebar.scrollTop);
                            log(`Saved position before navigation: ${sidebar.scrollTop}`);
                        }
                    });
                });
            }
        
            function ensureSidebarScrollable() {
                const sidebar = getSidebar();
                if (sidebar) {
                    sidebar.style.height = 'calc(100vh - 60px)';
                    sidebar.style.overflowY = 'auto';
                }
            }
        
            // Initialize everything
            ensureSidebarScrollable();
            initScrollHandler();
            addLinkListeners();
            preventScrollReset();
        });
      </script>
    </body>

</html>